<!DOCTYPE html>
<html>
<head>
  <title>Export Invoice Generator & Payment Verification</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 700px;
      margin: 40px auto;
      padding: 10px;
    }
    input, textarea {
      width: 100%;
      margin-bottom: 10px;
      padding: 10px;
      box-sizing: border-box;
    }
    button {
      padding: 12px;
      background-color: #007BFF;
      color: white;
      border: none;
      cursor: pointer;
      width: 100%;
      font-size: 16px;
      margin-bottom: 20px;
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    .note {
      font-size: 14px;
      color: #333;
      background: #f1f1f1;
      padding: 10px;
      border-left: 5px solid #007BFF;
      margin-top: 20px;
    }
    .form-section {
      margin-top: 40px;
      border-top: 2px solid #007BFF;
      padding-top: 20px;
    }
    a {
      color: #007BFF;
      text-decoration: none;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h2>Export Invoice Generator - Ethiopia</h2>

  <label>Exporter Name:</label>
  <input type="text" id="exporter" placeholder="e.g., Abyssinia Coffee Exporters">

  <label>Exporter TIN or License No.:</label>
  <input type="text" id="license" placeholder="e.g., 1000123456">

  <label>Buyer Name:</label>
  <input type="text" id="buyer" placeholder="e.g., XYZ Trading Co.">

  <label>Buyer Country:</label>
  <input type="text" id="country" placeholder="e.g., Germany">

  <label>Product Description:</label>
  <input type="text" id="product" placeholder="e.g., Washed Yirgacheffe Coffee">

  <label>Quantity (kg):</label>
  <input type="number" id="quantity" placeholder="e.g., 1000">

  <label>Price per kg (USD):</label>
  <input type="number" id="price" placeholder="e.g., 4.5">

  <label>Date:</label>
  <input type="date" id="date">

  <button onclick="generateInvoice()">Download Official Invoice PDF</button>

  <div class="note">
    <strong>Subscription Required:</strong><br>
    Please pay <strong>200 birr monthly</strong> via <strong>Telebirr</strong> to:<br>
    <strong>Phone Number:</strong> 0948006869<br>
    After payment, submit your proof of payment below to verify and get access.
  </div>

  <!-- Payment Verification Form Section -->
  <div class="form-section">
    <h2>Submit Your Telebirr Payment Proof</h2>
    <p>
      After you pay 200 birr to Telebirr (0948006869), please submit your payment proof below.
      We will verify manually and give you access.
    </p>
    <!--
      You need to create a Google Form yourself with these fields:
      1. Name (Short answer)
      2. Phone number (Short answer)
      3. Amount Paid (Short answer or number)
      4. Payment Screenshot (File upload)
      
      Then get the Google Form "POST" URL and replace it in the form action below.
    -->
    <form action="GOOGLE_FORM_ACTION_URL" method="POST" enctype="multipart/form-data" target="_blank" id="paymentForm">
      <label>Your Full Name:</label>
      <input name="entry.1234567890" type="text" required placeholder="Your full name">

      <label>Phone Number Used for Payment:</label>
      <input name="entry.2345678901" type="text" required placeholder="Phone number">

      <label>Amount Paid (birr):</label>
      <input name="entry.3456789012" type="number" required placeholder="200">

      <label>Upload Payment Screenshot:</label>
      <input name="entry.4567890123" type="file" accept="image/*" required>

      <button type="submit">Submit Payment Proof</button>
    </form>

    <p><em>After submitting, please wait for manual verification.</em></p>
  </div>

  <script>
    async function generateInvoice() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      // Input Values
      const exporter = document.getElementById('exporter').value;
      const license = document.getElementById('license').value;
      const buyer = document.getElementById('buyer').value;
      const country = document.getElementById('country').value;
      const product = document.getElementById('product').value;
      const quantity = document.getElementById('quantity').value;
      const price = document.getElementById('price').value;
      const date = document.getElementById('date').value;
      const total = (quantity * price).toFixed(2);

      // Validation
      if (!exporter || !license || !buyer || !country || !product || !quantity || !price || !date) {
        alert("Please fill in all fields before generating the invoice.");
        return;
      }

      // Header
      doc.setFontSize(16);
      doc.text("EXPORT COMMERCIAL INVOICE", 70, 20);
      doc.setFontSize(10);
      doc.text("Generated by ExportEasy Ethiopia", 20, 28);
      doc.line(20, 30, 190, 30);

      // Exporter Info
      doc.setFontSize(12);
      doc.text(`Exporter: ${exporter}`, 20, 40);
      doc.text(`License No: ${license}`, 20, 47);

      // Buyer Info
      doc.text(`Buyer: ${buyer}`, 20, 57);
      doc.text(`Country: ${country}`, 20, 64);

      // Product Table
      doc.setFontSize(12);
      doc.text("Product Information", 20, 75);
      doc.setFontSize(11);
      doc.text("Description", 20, 85);
      doc.text("Quantity (kg)", 90, 85);
      doc.text("Price (USD/kg)", 130, 85);
      doc.text("Total (USD)", 170, 85);

      doc.setFontSize(11);
      doc.text(product, 20, 95);
      doc.text(quantity, 95, 95);
      doc.text(price, 135, 95);
      doc.text(total, 175, 95);

      // Date and Signature
      doc.text(`Invoice Date: ${date}`, 20, 115);
      doc.text("Signature: ____________________", 20, 130);

      // Subscription Note
      doc.setFontSize(10);
      doc.setTextColor(150, 0, 0);
      doc.text("This invoice was generated using ExportEasy Ethiopia.", 20, 145);
      doc.text("To continue using this service, pay 200 birr monthly via Telebirr to: 0948006869", 20, 152);

      // Save PDF
      doc.save(`Export_Invoice_${date}.pdf`);
    }
  </script>
</body>
</html>
